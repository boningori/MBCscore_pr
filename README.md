# MBCscore - ミニバス スコアシート

MBCscoreは、ミニバスケットボールの試合記録をデジタル化し、簡単かつ直感的に管理できるプログレッシブウェブアプリ（PWA）です。
スマートフォンやタブレットにインストールして、ネイティブアプリのような操作感で使用できます。

## 📱 PWAとしての特徴（アプリとしてインストール）

このアプリはPWA（Progressive Web App）に対応しており、ブラウザから直接デバイスにインストールできます。

- **インストール可能**: ホーム画面に追加して、アプリとして起動できます。アドレスバーやブラウザのメニューが非表示になり、広い画面で操作できます。
- **オフライン対応**: 一度読み込めば、インターネット接続がない体育館でも問題なく動作します。
- **高速な動作**: キャッシュ機能を活用し、ページの読み込みが高速です。
- **全画面表示**: 没入感のある全画面モードでスコア記録に集中できます。

### インストール方法
1. **iPhone/iPad (Safari)**: 「共有」ボタンアイコンをタップし、「ホーム画面に追加」を選択します。
2. **Android (Chrome)**: メニューアイコンをタップし、「アプリをインストール」または「ホーム画面に追加」を選択します。
3. **PC (Chrome/Edge)**: アドレスバーの右端にあるインストールアイコンをクリックします。

## ✨ 主な機能

### 🎯 フリック入力 - 高速スコア記録
このアプリ最大の特徴は**フリック入力**によるスコア記録です。

- **上フリック → 成功**: シュートボタンを上方向にフリックすると得点を記録。
- **下フリック → ミス**: 下方向にフリックするとシュートミス（2PA/3PA/FTA）を記録。
- **タップ → 成功**: 従来通りのタップ操作にも対応。

視線を画面に向けたまま直感的に操作できるため、試合のテンポを崩さず記録できます。

### ⏳ 保留処理 - 「あとで決定」できる柔軟な入力
試合中は「誰の得点か分からない」「番号を見逃した」という場面が頻繁に発生します。
MBCscoreの**保留処理**機能は、そうした場面に対応します。

1. **アクション先行入力**: まずアクション（得点・ファウル等）を記録。
2. **選手は後から指定**: 選手が確認できた時点でタップして紐付け。
3. **複数保留にも対応**: 連続したプレーも順番に処理可能。

これにより、記録漏れを防ぎながら試合のペースに追従できます。

### 📱💻 2つの表示モード - デバイスに合わせた最適なUI

MBCscoreは**フルモード**と**シンプルモード**の2つの表示モードを切り替えて使用できます。

| モード | 推奨デバイス | 特徴 |
|--------|------------|------|
| **フルモード** | タブレット（iPad等） | 3カラムレイアウトで両チームの選手一覧とアクションボタンを同時表示。詳細なスタッツ記録に最適。 |
| **シンプルモード** | スマートフォン | 縦型レイアウトで得点・ファウルに特化。大きなボタンでスマホでも快適に操作可能。 |

画面右上のモード切替ボタンでいつでも変更できます。

---

### 1. 試合管理
- **チーム設定**: 自チームと対戦チームの名前、チームカラー（白/青など）を設定可能。
- **選手登録**: 背番号、名前、コートネームを登録・管理。
- **履歴保存**: 過去の対戦チーム情報を記憶し、再対戦時に素早く呼び出し可能。

### 2. スコア & スタッツ記録
- **得点**: 2点、3点、フリースロー(FT)をワンタップまたはフリックで記録。
- **スタッツ**: リバウンド(オフェンス/ディフェンス)、アシスト、スティール、ブロック、ターンオーバーを詳細に記録。
- **シュートミス**: シュート成功だけでなく、失敗（2PA/3PA/FTA）も記録可能。
- **選手交代**: 直感的なUIで選手交代とコート上のメンバー管理が可能。
- **クォーター管理**: Q1〜Q4のクォーター切り替えに対応。

### 3. ファウル管理
- **個人ファウル**: 5ファウル退場の警告表示。
- **チームファウル**: チームごとのファウル数を自動集計。
- **テクニカル/アンスポ**: テクニカルファウルやアンスポーツマンライクファウルにも対応。
- **コーチ・ベンチ**: コーチテクニカル(C)、ベンチテクニカル(B)も記録可能。

### 4. 履歴・編集機能
- **アクション履歴**: 記録した全てのアクション（得点、ファウル、スタッツ）を時系列で確認。
- **修正・削除**: 間違って記録したデータの削除や、選手・アクション種別の修正が可能。
- **成功/失敗の変換**: 「シュート成功」を「シュートミス」に、またはその逆に後から変更可能。

### 5. その他の便利機能
- **スコアシート表示**: 記録に基づいたランニングスコアシートを表示。
### 📸 OCR選手登録
- **カメラ読込**: メンバー表やスコアブックをカメラで撮影して選手リストを自動作成。
- **オフラインOCR**: Tesseract.jsを使用し、APIキー不要かつオフライン環境（初回ロード後）でも安全に文字認識が可能。

### 5. その他の便利機能
- **スコアシート表示**: 記録に基づいたランニングスコアシートを表示し、PDF/画像として保存可能。
- **音声入力**: Web Speech APIを使用した音声コマンド入力（Chrome, Safari等でAPIキー不要で利用可能）。
- **統計表示**: チームごとの詳細な統計データの閲覧。

## 🚀 開発と実行

### 必要要件
- Node.js (v18以上推奨)
- npm

### ローカルでの実行
```bash
# 依存関係のインストール
npm install

# 開発サーバーの起動
npm run dev
```

### ビルドとプレビュー
PWAの動作確認を行うにはビルドが必要です。

```bash
# ビルド
npm run build

# プレビュー（ビルド後のアプリを確認）
npm run preview
```

## 🛠 プロジェクト構成
- **Frontend**: React 19, TypeScript
- **Build Tool**: Vite
- **PWA**: vite-plugin-pwa
- **OCR**: Tesseract.js (On-device OCR)
- **PDF/Image**: jspdf, html2canvas

---
© 2024-2026 MBCscore Project
